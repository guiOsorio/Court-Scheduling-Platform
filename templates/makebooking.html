{% extends "layout.html" %}

{% block content %}

    <div class="form form__standard">
        <h1 class="form__standard__title">BOOKING</h1>
        <form action="/makebooking" method="POST" autocomplete="off">
            {{ form.csrf_token }}
            
            <div class="form-field">
                {{ form.people.label }}
                {{ form.people }}
            </div>
            
            <div class="form-field">
                {{ form.court.label }}
                {{ form.court(**{"onchange": "changeSelected()"}) }}
            </div>
            
            <div class="form-field">
                {{ form.date.label }}
                {{ form.date(**{"onchange": "changeSelected()"}) }}
            </div>
            
            <div class="form-field">
                <label for="time">Time</label>
                <select name="time" id="time" onchange="changeSelected()">
                    {% for time in pts %}
                        <option class="time-option" value="{{time}}">{{time}}</option>
                    {% endfor %}
                </select>
                <!-- {{ form.time.label }}
                {{ form.time }} -->
            </div>
            
            <div class="form-btn">
                <button>Submit</button>
            </div>
        </form>
    </div>

{% endblock %}

{% block js %}

<script>
    // Transform python variable to json
    let bhs = {{ bhs | tojson }}

    // Get all relevant fields
    let court_field = document.getElementById("court")
    let date_field = document.getElementById("date")
    let time_option = document.querySelectorAll("time-option")

    // Get selected values of releveant fields
    let selectedCourtValue = court_field.options[court_field.selectedIndex].value
    let selectedDateValue = date_field.value

    function changeSelected() {
        let court_field = document.getElementById("court")
        let date_field = document.getElementById("date")
        let time_option = document.querySelectorAll("time-option")

        // Get selected values of releveant fields
        let selectedCourtValue = court_field.options[court_field.selectedIndex].value
        let selectedDateValue = date_field.value
    }
</script>

{% endblock %}